---
title: "Refine, integrate and analyse Finna metadata"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Refine, integrate and analyse Finna metadata}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Introduction

The purpose of the ` refine_metadata()` function is to:

- **Ensure completeness** by filling in missing values with placeholder text.
- **Standardize key metadata fields** for easier analysis.
- **Select only the most relevant fields**, simplifying the dataset.

This refinement process makes the metadata more consistent and user-friendly, reducing potential issues in subsequent analysis or reporting.


```{r message = FALSE, warning = FALSE}
library(finna)
library(ggplot2)
sibelius_data <- search_finna("sibelius")
refined_data <- refine_metadata(sibelius_data)
print(refined_data)
```

### **integrate to other metadata **
To integrate two datasets using full_join() from dplyr, you can write the code directly like this:

```{r message = FALSE, warning = FALSE}
library(dplyr)

# Example Finna metadata (metadata1)
finna_data <- search_finna("sibelius",limit = 4)

# Example other dataset to merge with (metadata2)
other_data <- tibble::tibble(
  Title = c("Sibelius Symphony No. 5", "Finlandia", "Valse Triste"),
  Rating = c(5, 4, 3)
)

# Integrate the two datasets using full_join by the "Title" column
integrated_data <- full_join(finna_data, other_data, by = "Title")

# Print the integrated dataset
print(integrated_data)

```


### **Analyze using ` analyze_metadata()` Function**

```{r message = FALSE, warning = FALSE}
sibelius_data <- search_finna("sibelius")
refined_data <- refine_metadata(sibelius_data)
analysis_results <- analyze_metadata(refined_data)
print(analysis_results)
```

### 1. **Applying the `visualize_year_distribution()` Function**

```{r message = FALSE, warning = FALSE, fig.alt = "year_distribution"}
sibelius_data <- search_finna("sibelius")
refined_data <- refine_metadata(sibelius_data)
analysis_results <- analyze_metadata(refined_data)
#visualize_year_distribution(analysis_results$year_distribution)
top_plot(analysis_results$author_distribution, field = "n")
```

### 1. yearly distribution using top_plot()
```{r message = FALSE, warning = FALSE, fig.alt = "year distribution line"}
library(finna)
sibelius_data <- search_finna("sibelius")
refined_data <- refine_metadata(sibelius_data)
#visualize_year_distribution_line(refined_data)
top_plot(refined_data, field = "Year")
```



